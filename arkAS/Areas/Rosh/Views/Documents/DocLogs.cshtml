@*@model arkAS.Areas.Rosh.Models.DocumentsViewModel*@

@{
    ViewBag.Title = "DocLogs";
    Layout = "~/Areas/Rosh/Views/Shared/_Layout.cshtml";
    var js = new System.Web.Script.Serialization.JavaScriptSerializer();
}

<div class='usCont'>
</div>
@section js{
    <script type="text/javascript">

        var asdemo = {
            init: function () {
                asdemo.initMainTable();
            },
            initMainTable: function () {
                as.crud.init({
                    cont: $('.usCont'),
                    title: 'Логи изменений документов',
                    toolbarAdditional: '',
                    groupOperationsToolbar: '',
                    ajaxURLFormat: "/Rosh/Documents/DocLogs_{0}",
                    pageSize: 150,
                    cookiePrefix: "as-crud-DocLogsDict-",
                    emptyText: 'Нет элементов',
                    createLinkTitle: 'Создать',
                    filterLinkTitle: 'Найти',
                    filterTitle: 'Фильтрация данных',
                    showChecksCol: false,
                    showNumsCol: true,
                    showToolbar: true,
                    showColSettings: false,
                    showReplaceTool: false,
                    showExcelExport: false,
                    additionalSort: false,
                    cols: [
                    { code: "id", title: "ID", tooltip: "Идентификатор", isVisible: false, isPK: true, datatype: "int", isRequired: false, editHide: true },
                    { code: "date", title: "Дата изменений", tooltip: "Дата изменений", isVisible: true, isPK: false, datatype: "string", isRequired: true, format: "{0}", isSort: false, callback: null },
                    { code: "docNumber", title: "Номер документа", tooltip: "Номер документа", isVisible: true, isPK: false, datatype: "string", isRequired: true, format: "{0}", isSort: false, callback: null },
                    { code: "changes", title: "Изменения документа", tooltip: "Изменения документа", isVisible: true, isPK: false, datatype: "string", isRequired: true, format: "{0}", isSort: false, callback: null }
                    ],
                    operations: {
                        create: false,
                        remove: false,
                        edit: false,
                        other: [
                        ]
                    },

                    getFilterMakeup: function (filter)
                    {
                        var s = [];
                        s.push("<div class='crdFilterItem'><span class='gCap'>Номер документа</span><input type='text' class='usDocNumber' value='" + (filter.docNumber || '') + "' /></div>");

                        return s.join("");
                    },
                    filter: function ()
                    {
                        var filter = {
                            docNumber: $('.usDocNumber').val() || "",
                        };
                        return filter;
                    }

                });
            }
        }

        $(function () {
            asdemo.init();
        });
    </script>
}

